<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Implementing Evaluators &mdash; HermesPy Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/plot_directive.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tweaks.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/general.css" type="text/css" />
      <link rel="stylesheet" href="../_static/dark_mode_css/dark.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
        <script src="../_static/dark_mode_js/default_dark.js"></script>
        <script src="../_static/dark_mode_js/theme_switcher.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Configuration Examples" href="../examples/examples.html" />
    <link rel="prev" title="Using Audio Equipment" href="audio.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> HermesPy
            <img src="../_static/bi.svg" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                1.0.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">HermesPy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="channel.html">Implementing Channels</a></li>
<li class="toctree-l2"><a class="reference internal" href="fec_coding.html">Implementing FEC codings</a></li>
<li class="toctree-l2"><a class="reference internal" href="beamformer.html">Implementing Beamformers</a></li>
<li class="toctree-l2"><a class="reference internal" href="waveform.html">Implementing Communication Waveforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="precoding.html">Implementing Precodings</a></li>
<li class="toctree-l2"><a class="reference internal" href="audio.html">Using Audio Equipment</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Implementing Evaluators</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/examples.html">Configuration Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/api.html">HermesPy API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab.html">Matlab</a></li>
<li class="toctree-l1"><a class="reference internal" href="../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_hints.html">For Developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">HermesPy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../tutorials.html">Tutorials</a></li>
      <li class="breadcrumb-item active">Implementing Evaluators</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/evaluator.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container div.prompt *,
div.nboutput.container div.prompt *,
div.nbinput.container div.input_area pre,
div.nboutput.container div.output_area pre,
div.nbinput.container div.input_area .highlight,
div.nboutput.container div.output_area .highlight {
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
}

div.nbinput.container > div[class*=highlight],
div.nboutput.container > div[class*=highlight] {
    margin: 0;
}

div.nbinput.container div.prompt *,
div.nboutput.container div.prompt * {
    background: none;
}

div.nboutput.container div.output_area .highlight,
div.nboutput.container div.output_area pre {
    background: unset;
}

div.nboutput.container div.output_area div.highlight {
    color: unset;  /* override Pygments text color */
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars and line breaks on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
    white-space: pre;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    /*background: #f5f5f5;*/
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
    margin: 0;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt .copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
.jp-RenderedHTMLCommon table,
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
.jp-RenderedHTMLCommon thead,
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
.jp-RenderedHTMLCommon tr,
.jp-RenderedHTMLCommon th,
.jp-RenderedHTMLCommon td,
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
.jp-RenderedHTMLCommon th,
div.rendered_html th {
  font-weight: bold;
}
.jp-RenderedHTMLCommon tbody tr:nth-child(odd),
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
.jp-RenderedHTMLCommon tbody tr:hover,
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This static document was automatically created from the output of a jupyter notebook.</p>
<p>Execute and modify the notebook online <a class="reference external" href="https://colab.research.google.com/github/Barkhausen-Institut/hermespy/blob/main/docssource/notebooks/evaluator.ipynb">here</a>.</p>
</div>
<section id="Implementing-Evaluators">
<h1>Implementing Evaluators<a class="headerlink" href="#Implementing-Evaluators" title="Permalink to this heading"></a></h1>
<p><a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluator"><span class="std std-ref">Evaluators</span></a> represent the process of estimating performance indicators within Hermes’ API, both during simulation runtime and in custom use-cases. They are, arguably, one of the more complex concepts to grasp for library users not very accustomed to distributed computing.</p>
<p>In order to demonstrate the programming workflow, we’ll add an evaluator estimating the average signal power received at a wireless device. Such an tool could be useful to gain insight into the behaviour of beamformers in multipath environments, or simply as a debugging tool of channel models and waveforms. Let’s get right into it:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>from typing import List

import matplotlib.pyplot as plt
import numpy as np

from hermespy.core import Artifact, Device, Evaluation, EvaluationResult, Evaluator, Executable, GridDimension


class PowerArtifact(Artifact):

    power: float

    def __init__(self, power: float) -&gt; None:

        self.power = power

    def __str__(self) -&gt; str:

        return f&quot;{self.power:.2f}&quot;

    def to_scalar(self) -&gt; float:

        return self.power


class PowerEvaluation(Evaluation):

    power: np.ndarray

    def __init__(self, device: Device) -&gt; None:

        received_signal = device.received_signal

        if received_signal is None:
            raise RuntimeError(&quot;Device has not received a signal yet&quot;)

        self.power = received_signal.power

    def plot(self) -&gt; None:

        with Executable.style_context():

            fig, axis = plt.subplots()
            fig.suptitle(&#39;Received Signal Powers&#39;)

            axis.stem(np.arange(len(self.power)), self.power)
            axis.set_xlabel(&#39;Antenna Index&#39;)
            axis.set_ylabel(&#39;Power&#39;)

    def artifact(self) -&gt; PowerArtifact:

        summed_power = np.sum(self.power, keepdims=False)
        return PowerArtifact(summed_power)


class PowerEvaluationResult(EvaluationResult):

    def __init__(self, grid: List[GridDimension], artifacts: np.ndarray) -&gt; None:

        self.grid = grid

        self.artifacts = np.empty(artifacts.shape, dtype=float)
        for section_coords in np.ndindex(artifacts.shape):
            self.artifacts[section_coords] = np.mean([a.power for a in artifacts[section_coords]])

    def plot(self) -&gt; plt.Figure:

        with Executable.style_context():

            fig = plt.figure()
            fig.suptitle(&#39;Power Evaluation Result&#39;)
            self._plot_multidim(self.grid, self.artifacts, 0, &#39;Average Power&#39;, &#39;linear&#39;, &#39;linear&#39;, fig)

            return fig

    def to_array(self) -&gt; np.ndarray:

        return self.artifacts


class PowerEstimator(Evaluator):

    def __init__(self, device: Device) -&gt; None:

        self.__device = device
        Evaluator.__init__(self)

    def evaluate(self) -&gt; PowerEvaluation:

        return PowerEvaluation(self.__device)

    @property
    def abbreviation(self) -&gt; str:

        return &quot;Power&quot;

    @property
    def title(self) -&gt; str:

        return &quot;Received Power&quot;

    def generate_result(self, grid: List[GridDimension], artifacts: np.ndarray) -&gt; PowerEvaluationResult:

        return PowerEvaluationResult(grid, artifacts)
</pre></div>
</div>
</div>
<p>Here’s what you’re probably thinking right now: <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Artifact"><span class="std std-ref">Artifacts</span></a>, <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluation"><span class="std std-ref">Evaluations</span></a>, <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.EvaluationResult"><span class="std std-ref">EvaluationResults</span></a> and <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluator"><span class="std std-ref">Evaluators</span></a>, why do we need four interacting classes to investigate a single performance indicator? The answer is, this
structure is required to enable efficient distributed execution of Monte Carlo simulations, while simulatenously offering an easily programmable interface for other use-cases such as software defined radio operation.</p>
<p>The basis is the <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluator"><span class="std std-ref">Evaluator</span></a>, in our case the <em>PowerEstimator</em>. Given a single scenario data drop, it generates an <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluation"><span class="std std-ref">Evaluation</span></a> object representing the extracted performance indicator information. This information is then compressed to Artifacts <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Artifact"><span class="std std-ref">Artifacts</span></a> for each simulation grid sample and
finally collected within the <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluator.generate_result"><span class="std std-ref">generate_result</span></a> method of the <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Evaluator"><span class="std std-ref">Evaluator</span></a>, creating an <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.EvaluationResult"><span class="std std-ref">EvaluationResult</span></a>.</p>
<p>During distributed simulations, the process of generating <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.Artifact"><span class="std std-ref">Artifacts</span></a> is executed multiple times in parallel, with only the resulting artifacts being sent to the simulation controller, in order to optimize the simulation data throughput between simulation controller and distributed simulation workers. Hermes is built around the <a class="reference external" href="https://www.ray.io/">Ray</a>, with optimizations like this Monte Carlo simulations become
“embarassingly parallel” and, as a consequence, blazingly fast on multicore systems.</p>
<p>We can now define the simulation scenario of a two-device <span class="math notranslate nohighlight">\(5 \times 5\)</span> MIMO simplex link transmitting an OFDM waveform over an ideal channel. Within a Monte Carlo simulation, we sweep the channel gain and observe the effect on the received signal power by our newly created Estimator:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import matplotlib.pyplot as plt

from hermespy.core import UniformArray, IdealAntenna
from hermespy.modem import SimplexLink, ElementType, FrameElement, FrameResource, FrameSymbolSection, OFDMWaveform
from hermespy.precoding import SpatialMultiplexing
from hermespy.simulation import Simulation

# Create a new Monte Carlo simulation
simulation = Simulation()

# Configure a simplex link between a transmitting and receiving device, interconnected by an ideal channel
operator = SimplexLink(simulation.new_device(antennas=UniformArray(IdealAntenna, 1e-2, [5, 1, 1])),
                       simulation.new_device(antennas=UniformArray(IdealAntenna, 1e-2, [5, 1, 1])))

# Configure an OFDM waveform with a frame consisting of a single symbol section
operator.waveform_generator = OFDMWaveform(resources=[FrameResource(elements=[FrameElement(ElementType.DATA, 1200)])],
                                           structure=[FrameSymbolSection(pattern=[0])])
operator.precoding[0] = SpatialMultiplexing()

# Configure a sweep over the linking channel&#39;s gain
simulation.new_dimension(&#39;gain&#39;,
                         np.linspace(0, 1, 11, endpoint=True),
                         simulation.scenario.channel(operator.transmitting_device, operator.receiving_device))

# Configure our custom power evaluator
power_estimator = PowerEstimator(operator.receiving_device)
simulation.add_evaluator(power_estimator)

# Run the simulation
result = simulation.run()
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #00ff00; text-decoration-color: #00ff00">──────────────────────────────────── </span>Simulation Campaign<span style="color: #00ff00; text-decoration-color: #00ff00"> ────────────────────────────────────</span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[20:54:30] </span>Launched simulation campaign with <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">24</span> dedicated actors          <a href="file://D:\hermespy\hermespy\core\monte_carlo.py"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">monte_carlo.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file://D:\hermespy\hermespy\core\monte_carlo.py#1720"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">1720</span></a>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">           </span>Generating a maximum of <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1100</span> = <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">100</span> x <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">11</span> samples inspected by <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">1</span> <a href="file://D:\hermespy\hermespy\core\monte_carlo.py"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">monte_carlo.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file://D:\hermespy\hermespy\core\monte_carlo.py#1740"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">1740</span></a>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">           </span>evaluators                                                     <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">                   </span>
<span style="color: #7fbfbf; text-decoration-color: #7fbfbf">           </span>                                                               <span style="color: #7f7f7f; text-decoration-color: #7f7f7f">                   </span>
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="font-style: italic">Simulation Grid                                                        </span>
┏━━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃<span style="font-weight: bold"> Dimension </span>┃<span style="font-weight: bold"> Sections                                                </span>┃
┡━━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┩
│<span style="color: #008080; text-decoration-color: #008080"> gain      </span>│<span style="color: #008000; text-decoration-color: #008000"> 0.00 0.10 0.20 0.30 0.40 0.50 0.60 0.70 0.80 0.90 1.00  </span>│
└───────────┴─────────────────────────────────────────────────────────┘
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8c92ac5c651649f48c39087b6394d7bc", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "f14064e177a3464f86c6bdfcce0192df", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"></pre></div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace">
</pre></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area rendered_html docutils container">
<pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #7fbfbf; text-decoration-color: #7fbfbf">[20:54:43] </span>Simulation finished after <span style="color: #008080; text-decoration-color: #008080; font-weight: bold">13.14</span> seconds                        <a href="file://D:\hermespy\hermespy\core\monte_carlo.py"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">monte_carlo.py</span></a><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">:</span><a href="file://D:\hermespy\hermespy\core\monte_carlo.py#1881"><span style="color: #7f7f7f; text-decoration-color: #7f7f7f">1881</span></a>
</pre></div>
</div>
<p>The simulation routine automatically distributes the workload to all detected CPU cores within the system (in this case <span class="math notranslate nohighlight">\(24\)</span>) and generates <em>PowerArtifact</em> objects in parallel. Once the simulation is finished, a single <em>PowerEvaluationResult</em> is generated and stored within a <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.MonteCarloResult"><span class="std std-ref">MonteCarloResult</span></a> returned by the simulation <a class="reference internal" href="../api/simulation.simulation.html#hermespy.simulation.simulation.Simulation.run"><span class="std std-ref">run</span></a> method.</p>
<p>Calling the result’s <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.MonteCarloResult.plot"><span class="std std-ref">plot</span></a> method will then internally call the evaluation result’s <a class="reference internal" href="../api/core.monte_carlo.html#hermespy.core.monte_carlo.EvaluationResult.plot"><span class="std std-ref">plot</span></a>, resulting in the following performance indicator visualization:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>result.plot()
plt.show()
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_evaluator_5_0.png" src="../_images/notebooks_evaluator_5_0.png" />
</div>
</div>
<p>Now while this renders the average power over a number of samples within a simulation, the <a class="reference internal" href="../api/hardware_loop.html"><span class="doc">Hardware Loop</span></a> has a feature representing performance indicator information in real time during data collection.</p>
<p>This is internally realized by calling the plot funtion of evaluations generated by evaluators, before they are being compressed to artifacts. We can demonstrate the output in our current simulation scenario by generating a single drop and calling the evaluator:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>_ = simulation.scenario.drop()

power_estimator.evaluate().plot()
plt.show()
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../_images/notebooks_evaluator_7_0.png" src="../_images/notebooks_evaluator_7_0.png" />
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
Exception in thread 2022-12-08 23:27:15,626     ERROR worker.py:813 -- print_logs: &lt;_MultiThreadedRendezvous of RPC that terminated with:
        status = StatusCode.UNKNOWN
        details = &#34;Stream removed&#34;
        debug_error_string = &#34;UNKNOWN:Error received from peer ipv4:127.0.0.1:49322 {grpc_message:&#34;Stream removed&#34;, grpc_status:2, created_time:&#34;2022-12-08T22:27:15.621707663+00:00&#34;}&#34;
&gt;
ray_listen_error_messages:
Traceback (most recent call last):
  File &#34;C:\Users\Stealth\AppData\Local\Programs\Python\Python3912\lib\threading.py&#34;, line 980, in _bootstrap_inner
2022-12-08 23:27:15,630 ERROR import_thread.py:76 -- ImportThread: &lt;_MultiThreadedRendezvous of RPC that terminated with:
        status = StatusCode.UNKNOWN
        details = &#34;Stream removed&#34;
        debug_error_string = &#34;UNKNOWN:Error received from peer ipv4:127.0.0.1:49322 {grpc_message:&#34;Stream removed&#34;, grpc_status:2, created_time:&#34;2022-12-08T22:27:15.621687705+00:00&#34;}&#34;
&gt;
    self.run()
  File &#34;C:\Users\Stealth\AppData\Local\Programs\Python\Python3912\lib\threading.py&#34;, line 917, in run
    self._target(*self._args, **self._kwargs)
  File &#34;d:\envs\hermes\lib\site-packages\ray\_private\worker.py&#34;, line 1824, in listen_error_messages
    _, error_data = worker.gcs_error_subscriber.poll()
  File &#34;d:\envs\hermes\lib\site-packages\ray\_private\gcs_pubsub.py&#34;, line 317, in poll
    self._poll_locked(timeout=timeout)
  File &#34;d:\envs\hermes\lib\site-packages\ray\_private\gcs_pubsub.py&#34;, line 249, in _poll_locked
    fut.result(timeout=1)
  File &#34;d:\envs\hermes\lib\site-packages\grpc\_channel.py&#34;, line 744, in result
    raise self
grpc._channel._MultiThreadedRendezvous: &lt;_MultiThreadedRendezvous of RPC that terminated with:
        status = StatusCode.UNKNOWN
        details = &#34;Stream removed&#34;
        debug_error_string = &#34;UNKNOWN:Error received from peer ipv4:127.0.0.1:49322 {grpc_message:&#34;Stream removed&#34;, grpc_status:2, created_time:&#34;2022-12-08T22:27:15.621122805+00:00&#34;}&#34;
&gt;
</pre></div></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="audio.html" class="btn btn-neutral float-left" title="Using Audio Equipment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../examples/examples.html" class="btn btn-neutral float-right" title="Configuration Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
<jinja2.runtime.BlockReference object at 0x7f9e7a0a66d0>
<p>
    <a href="https://www.barkhauseninstitut.org/en/impressum">Imprint</a> <br/>
    <a href="https://www.barkhauseninstitut.org/en/data-privacy">Data Privacy</a>
</p>

  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>